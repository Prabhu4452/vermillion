{"networks": {"iudx-net": {"driver": "overlay"}}, "services": {"authenticator": {"deploy": {"labels": {"type": "authenticator"}, "placement": {"constraints": ["node.role==worker"]}, "replicas": 4}, "env_file": [".env"], "environment": ["WAIT_HOSTS=postgres:5432"], "hostname": "authenticator", "image": "iudx/authenticator", "networks": ["iudx-net"], "restart": "always", "volumes": ["../iudx-authenticator:/iudx-authenticator/"]}, "postgres": {"deploy": {"labels": {"type": "auth-db"}, "placement": {"constraints": ["node.role == manager"]}}, "env_file": [".env"], "hostname": "postgres", "image": "iudx/postgres", "networks": ["iudx-net"], "ports": ["5432:5432"]}, "vertx": {"deploy": {"labels": {"type": "http-proxy"}, "placement": {"constraints": ["node.role==manager"]}, "replicas": 4}, "env_file": [".env"], "environment": ["WAIT_HOSTS_TIMEOUT=300", "WAIT_HOSTS=postgres:5432,authenticator:80,rabbit1:5672,rabbit2:5672,rabbit3:5672,rabbit4:5672"], "hostname": "vertx", "image": "iudx/vertx", "networks": ["iudx-net"], "ports": ["443:8443"], "volumes": ["../iudx-api-server:/iudx-api-server/"]}, "rabbit1": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "env_file": [".env"], "hostname": "rabbit1", "image": "rabbitmq:3.7.18", "networks": ["iudx-net"], "ports": ["15673:15672", "5673:5672"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"]}, "rabbit2": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "env_file": [".env"], "hostname": "rabbit2", "image": "rabbitmq:3.7.18", "networks": ["iudx-net"], "ports": ["15674:15672", "5674:5672"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"]}, "rabbit3": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "env_file": [".env"], "hostname": "rabbit3", "image": "rabbitmq:3.7.18", "networks": ["iudx-net"], "ports": ["15675:15672", "5675:5672"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"]}, "rabbit4": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "env_file": [".env"], "hostname": "rabbit4", "image": "rabbitmq:3.7.18", "networks": ["iudx-net"], "ports": ["15676:15672", "5676:5672"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"]}}, "version": "3"}