{"services": {"authenticator": {"deploy": {"labels": {"type": "authenticator"}, "placement": {"constraints": ["node.role==worker"]}, "replicas": 2}, "image": "iudx/authenticator", "hostname": "authenticator", "environment": ["WAIT_HOSTS=postgres:5432"], "volumes": ["../iudx-authenticator:/iudx-authenticator/"], "env_file": [".env"], "networks": ["iudx-net"], "restart": "always"}, "rabbit2": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "image": "iudx/rabbitmq-cluster", "hostname": "rabbit2", "networks": ["iudx-net"], "environment": ["WAIT_HOSTS_TIMEOUT=60", "WAIT_HOSTS=rabbit1:5672"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"], "env_file": [".env"], "ports": ["127.0.0.1:15674:15672"]}, "postgres": {"env_file": [".env"], "hostname": "postgres", "networks": ["iudx-net"], "image": "iudx/postgres", "deploy": {"labels": {"type": "auth-db"}, "placement": {"constraints": ["node.role == manager"]}}}, "vertx": {"deploy": {"labels": {"type": "http-proxy"}, "placement": {"constraints": ["node.role==manager"]}, "replicas": 1}, "image": "iudx/vertx", "hostname": "vertx", "ports": ["443:8443"], "environment": ["WAIT_HOSTS_TIMEOUT=60", "WAIT_HOSTS=postgres:5432,authenticator:80,rabbit1:5672,rabbit2:5672"], "volumes": ["../iudx-api-server:/iudx-api-server/"], "env_file": [".env"], "networks": ["iudx-net"]}, "rabbit1": {"deploy": {"labels": {"type": "broker"}, "placement": {"constraints": ["node.role == worker"]}}, "image": "iudx/rabbitmq-cluster", "hostname": "rabbit1", "networks": ["iudx-net"], "volumes": ["../conf/rabbitmq:/etc/rabbitmq/"], "env_file": [".env"], "ports": ["127.0.0.1:15673:15672"]}}, "version": "3", "networks": {"iudx-net": {"driver": "overlay"}}}