{
    "networks": {
        "iudx-net": {
            "driver": "overlay"
        }
    },
    "services": {
        "postgres": {
            "env_file": [
                ".env"
            ],
	    "deploy": {
                "labels": {
                    "type": "auth-db"
                },
                "placement": {
                    "constraints": [
                        "node.role == manager"
                    ]
                }
            },
            "hostname": "postgres",
            "image": "iudx/postgres",
            "networks": [
                "iudx-net"
            ]
        },
        "vertx": {
            "env_file": [
                ".env"
            ],
	    "deploy": {
                "labels": {
                    "type": "http-proxy"
                },
		"replicas": 1
            },
            "hostname": "vertx",
            "image": "iudx/vertx",
            "networks": [
                "iudx-net"
            ],
            "ports": [
                "443:8443"
            ],
            "volumes": [
                "../iudx-api-server:/iudx-api-server/"
            ]

        }
    },
    "version": "3"
}
